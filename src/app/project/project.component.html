<button mat-flat-button (click)="openCreateDialog()">New Project</button>
<div class="wrapper mat-elevation-z8">


  <div class="table-container">
    <!--
        <div class="loading-shade" *ngIf="isLoadingResults ">
          <mat-spinner *ngIf="isLoadingResults"></mat-spinner>
        </div>-->
    <table mat-table [dataSource]="tableData" matSort>

      <!--      <ng-container *ngFor="let column of displayedColumns" [matColumnDef]="column">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>{{column}}</th>
              <td mat-cell *matCellDef="let row">
                <span *ngIf="checkIfObject(row[column])"><pre>{{row[column] | json}}</pre></span>
                <span *ngIf="!checkIfObject(row[column])">{{row[column]}}</span></td>
            </ng-container>-->
      <ng-container matColumnDef="Id">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Id</th>
        <td mat-cell *matCellDef="let element"> {{element.id}}</td>
      </ng-container>
      <ng-container matColumnDef="Owner">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Owner</th>
        <td mat-cell *matCellDef="let element"> {{element.owner}}</td>
      </ng-container>
      <ng-container matColumnDef="Title">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Title</th>
        <td mat-cell *matCellDef="let element"> {{element.title}}</td>
      </ng-container>
      <ng-container matColumnDef="Indices">
        <th mat-header-cell *matHeaderCellDef mat-sort-header><span class="indices-column-header">Indices</span></th>
        <td mat-cell *matCellDef="let element">
          <mat-menu #indicesMenu="matMenu">
            <ng-template matMenuContent>
              <ng-template ngFor let-indice [ngForOf]="element.indices">
                <button mat-menu-item>{{indice}}</button>
              </ng-template>
            </ng-template>
          </mat-menu>
          <button mat-stroked-button [matMenuTriggerFor]="indicesMenu">{{element.indices.length}}</button>
        </td>
      </ng-container>
        <ng-container matColumnDef="Users">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Users</th>
          <td mat-cell *matCellDef="let element">
            <mat-menu #userMenu="matMenu">
              <ng-template matMenuContent>
                <ng-template ngFor let-user [ngForOf]="projectUsers$ | async">
                  <button mat-menu-item [matMenuTriggerFor]="userDetailed">{{user.username}}</button>
                  <mat-menu #userDetailed="matMenu">
                    <button mat-menu-item>Email: {{user.email}}</button>
                    <button mat-menu-item>Joined: {{user.date_joined | date}}</button>
                    <button mat-menu-item>ID: {{user.id}}</button>
                  </mat-menu>
                </ng-template>
              </ng-template>
            </mat-menu>
            <button mat-stroked-button [matMenuTriggerFor]="userMenu" (click)="selectUserElement(element.users)">
              {{element.users.length}}
            </button>
          </td>
        </ng-container>
      <ng-container matColumnDef="Modify">
        <th mat-header-cell class="center-header-cell" *matHeaderCellDef>Edit</th>
        <td mat-cell *matCellDef="let element; let index = index">

          <button mat-icon-button color="primary" (click)="edit(element)">
            <mat-icon aria-label="Edit Project">edit</mat-icon>
          </button>

        </td>
      </ng-container>


      <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

    </table>

  </div>

  <mat-paginator [pageSizeOptions]="[15, 50, 100]" showFirstLastButtons>

  </mat-paginator>

</div>
