<mat-select #select [disableOptionCentering]="true" (focusout)="onSelectFocusLeave($event)"
            (openedChange)="selectBlur($event)"
            (selectionChange)="selectionChanged.next($event)"
            [formControl]="fieldFormControl" [multiple]="multiple" [required]="required"
            panelClass="select-panel-reveal-input">
  <mat-select-trigger *ngIf="multiple">{{fieldFormControl?.value | join: ', '}}</mat-select-trigger>
  <mat-select-trigger *ngIf="!multiple">{{fieldFormControl?.value}}</mat-select-trigger>
  <app-mat-option-select-all [multiple]="multiple"></app-mat-option-select-all>
  <mat-option *ngFor="let field of fieldsUnique" title="{{fieldIndexMap.get(field.path)?.join('\n')}}"
              [value]="field.path">
    <ng-container *ngIf="field.type === 'fact'">
      {{field.path}}
    </ng-container>
    <ng-container *ngIf="field.type === 'date'">
      <mat-icon>date_range</mat-icon>
      {{field.path}}
    </ng-container>
    <ng-container *ngIf="field.type === 'text' || field.type === 'keyword' || field.type === 'mlp'">
      <mat-icon>text_fields</mat-icon>
      {{field.path}}
    </ng-container>
    <ng-container *ngIf="field.type === 'long' || field.type === 'float'">
      <mat-icon>pin</mat-icon>
      {{field.path}}
    </ng-container>
    <ng-container *ngIf="field.type === 'boolean'">
      <mat-icon>flaky</mat-icon>
      {{field.path}}
    </ng-container>
  </mat-option>

</mat-select>
