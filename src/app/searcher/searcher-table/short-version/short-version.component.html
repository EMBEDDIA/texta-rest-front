<ng-container *ngFor="let highlight of highlightArray; let i = index;">
  <ng-template [ngIf]="highlight.type === 'text'">
    <span [matMenuTriggerData]="{highlight: highlight}" [matMenuTriggerFor]="contextOptions" style="cursor: pointer;">
      {{highlight.displayText}}
      <br *ngIf="i > 0 && highlightArray[i-1].type === 'context'">
    </span>
  </ng-template>
  <ng-template [ngIf]="highlight.type === 'context'">
    <span>{{highlight.text}}</span>
  </ng-template>
  <ng-template [ngIf]="highlight.type === 'highlight'">
    <span style.background-color="{{highlight?.color?.backgroundColor}}"
          style.color="{{highlight?.color?.textColor}}">{{highlight.text}}</span>
  </ng-template>

</ng-container>
<mat-menu #contextOptions="matMenu">
  <ng-template let-highlight="highlight" matMenuContent>
    <button (click)="toggleSpanText(highlight)" mat-menu-item>Toggle content</button>
    <button (click)="toggleAll()" mat-menu-item>Toggle all</button>
  </ng-template>
</mat-menu>
